<!DOCTYPE html>
<html>
  <head>
    <title>Mysterious Scroll</title>
    <style>
      body {
        background-image: url('https://www.goodtextures.com/cache/f38a2d8a/av12d62791abb8a085977.jpg');
        height:calc(100vh - 16px);
        display:flex;
        flex-direction: column;
      }
      button {
      	color: #000000;
      	background-color: #dbae61;
      	font-size: 20px;
      	border: 1px solid #000000;
      	border-radius: 10px;
      	padding: 15px 50px;
      	cursor: pointer;
        margin: auto;
        display: flex;
      }
      button:hover {
        background-color: #af6d41;
      }
      .transparent {
        animation: fadeIn 1s;
      }

      @keyframes fadeIn {
        0% { opacity: 0; }
        20% { opacity: 0; }
        100% { opacity: 1; }
      }

      #Scroll {
        max-width:800px;
        margin:auto;
        min-width:700px;
      }
      #Scroll > div {
        width: 100%;
        min-height:100px;
        display:flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        filter: drop-shadow(0px 5px 10px rgba(0,0,0,0.5));
      }

      #ScrollOpen {
        background-image: url('ParchmentTexture.png');
        background-size: contain;
        box-sizing: border-box;
        background-repeat: no-repeat;
        background-position-x: center;
        align-self: center;
      }

      #ScrollOpen > div {
        margin: 14% 20%;
      }

      #ScrollOpen img {
        width: 15%;
      }

      #ScrollClosed {
        padding-bottom: 6vh;
      }

      #ScrollClosed > img {
        width:100%;
      }

      .Hidden {
        display: none!important;
      }
    </style>
  </head>
  <body>
    <div id="Scroll">
      <div id="ScrollOpen" class="Hidden">
        <div id="ScrollText" class="transparent"></div>

      </div>
      <div id="ScrollClosed"><img src="ScrollClosed.png"></div>
      <button id="ReadScrollButton" type="button" name="ReadScroll" onclick="ReadScroll()">Read Scroll</button>
    </div>
  </body>
  <script>
    function ReadFile(name, callback)
    {
      const txtfile = name;
      // create a new XMLHttpRequest object to load the file
      var xhr = new XMLHttpRequest();

      // specify the path to the file
      var filePath = txtfile;

      // define a variable to store the file contents
      var fileContents;

      // define a function to handle the file loaded event
      xhr.onload = function() {
        // create a new instance of FileReader
        var reader = new FileReader();

        // define the callback function that will be called when the file is loaded
        reader.onload = function(event) {
          // the file contents are stored in the result property
          fileContents = event.target.result;
          //console.log(fileContents);
          callback(fileContents);
        };

        // read the contents of the file
        reader.readAsText(xhr.response);
      };

      // open the file
      xhr.open("GET", filePath, true);

      // specify the response type as text
      xhr.responseType = "blob";

      // send the request
      xhr.send();
    }

    function ReadScroll() {
      document.title = "Letter to Venomfang";
      let ScrollContent = "";

      ReadFile("LetterToVenomfang.txt", function(ScrollContent)
      {
        PlaySnd();

        var el = document.getElementById("ScrollClosed");
        el.classList.add('Hidden');
        el = document.getElementById("ReadScrollButton");
        el.classList.add('Hidden');
        el = document.getElementById("ScrollText");
        el.innerHTML = ScrollContent;
        console.log(ScrollContent); // will output the contents of the file, because the async function has finished executing
        setTimeout(function() {
          el = document.getElementById("ScrollOpen");
          el.classList.remove('Hidden');
        }, 200);
        setTimeout(function() {
          el = document.getElementById("ScrollText");
          //el.classList.remove('transparent');
        }, 200);
      });
    }

    function PlaySnd()
    {
      var audio = new Audio('PaperShuffle.wav');
      audio.play();
    }
  </script>
</html>
